<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sustainable Credit Risk AI</title>
    <link rel="stylesheet" href="/web/static/styles.css" />
  </head>
  <body>
    <div class="bg-orb bg-orb-a"></div>
    <div class="bg-orb bg-orb-b"></div>

    <header class="topbar">
      <div class="brand">
        <span class="brand-mark">SC</span>
        <div>
          <h1>Sustainable Credit Risk AI</h1>
          <p>Full-Stack Decision Intelligence</p>
        </div>
      </div>
      <a class="docs-link" href="/docs" target="_blank" rel="noreferrer">API Docs</a>
    </header>

    <main class="layout">
      <section class="card status-card">
        <h2>System Status</h2>
        <div class="status-grid">
          <div class="status-pill" id="healthStatus">Health: checking...</div>
          <div class="status-pill" id="readyStatus">Readiness: checking...</div>
          <div class="status-pill" id="apiStatus">API: checking...</div>
        </div>
        <button class="btn secondary" id="refreshStatusBtn">Refresh Status</button>
      </section>

      <section class="card form-card">
        <h2>Credit Risk Prediction</h2>
        <form id="predictionForm">
          <div class="field-grid">
            <label>Age <input type="number" name="age" min="18" max="100" value="35" required /></label>
            <label>Income (USD) <input type="number" name="income" min="0" value="85000" required /></label>
            <label>Employment Length (years) <input type="number" name="employment_length" min="0" max="50" value="7" required /></label>
            <label>Debt-to-Income Ratio <input type="number" name="debt_to_income_ratio" min="0" max="1" step="0.01" value="0.33" required /></label>
            <label>Credit Score <input type="number" name="credit_score" min="300" max="850" value="690" required /></label>
            <label>Loan Amount (USD) <input type="number" name="loan_amount" min="1000" value="14000" required /></label>

            <label>Loan Purpose
              <select name="loan_purpose">
                <option value="debt_consolidation">Debt Consolidation</option>
                <option value="home_improvement">Home Improvement</option>
                <option value="major_purchase">Major Purchase</option>
                <option value="medical">Medical</option>
                <option value="vacation">Vacation</option>
                <option value="wedding">Wedding</option>
                <option value="moving">Moving</option>
                <option value="other">Other</option>
              </select>
            </label>

            <label>Home Ownership
              <select name="home_ownership">
                <option value="rent">Rent</option>
                <option value="own">Own</option>
                <option value="mortgage">Mortgage</option>
                <option value="other">Other</option>
              </select>
            </label>

            <label>Verification Status
              <select name="verification_status">
                <option value="verified">Verified</option>
                <option value="source_verified">Source Verified</option>
                <option value="not_verified">Not Verified</option>
              </select>
            </label>
          </div>

          <div class="toggle-row">
            <label><input type="checkbox" name="include_explanation" checked /> Include explanation</label>
            <label><input type="checkbox" name="track_sustainability" checked /> Track sustainability</label>
          </div>

          <div class="actions">
            <button class="btn primary" id="predictBtn" type="submit">Run Prediction</button>
          </div>
        </form>
      </section>

      <section class="card result-card">
        <h2>Prediction Result</h2>
        <div id="resultEmpty" class="muted">Submit an application to see model output.</div>
        <div id="resultPanel" class="hidden">
          <div class="score-ring">
            <div class="ring" id="riskRing">
              <span id="riskPercent">0%</span>
            </div>
            <div>
              <p class="label">Risk Level</p>
              <p class="value" id="riskLevel">-</p>
              <p class="label">Confidence</p>
              <p class="value" id="confidence">-</p>
            </div>
          </div>
          <pre id="resultJson"></pre>
        </div>
      </section>
    </main>

    <footer class="footer">
      <p>Backend: FastAPI | Frontend: Vanilla JS | Route: <code>/web</code></p>
    </footer>

    <script src="/web/static/app.js"></script>
  </body>
</html>
